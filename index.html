<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function create(name, info) {
            const newObject = {};
            let statusByDefault = 'to do';
            let array = this.listArray;
            if (!array[0]) {
                newObject.task = name;
                newObject.status = statusByDefault;
                newObject.info = info;
                array.push(newObject)
            }

            array.forEach(function (el, index) {
                let iteralObject = el;
                if (iteralObject.task !== name) {
                    index++;
                }
                if (index === array.length) {
                    newObject.task = name;
                    newObject.status = statusByDefault;
                    newObject.info = info;
                    array.push(newObject)
                }
            })
            return array;
        }
        function remove(task) {
            let array = this.listArray;
            array.forEach(function (el, index) {
                let object = el;
                if (object.task === task) {
                    array.splice(index, 1)
                }
            })
            return array;
        }
        function info() {
            let array = this.listArray;
            const taskCounter = {
                all: array.length,
                toDo: 0,
                done: 0
            };
            array.forEach(function (el) {
                let iteralObject = el;
                let acc = taskCounter.toDo;
                let doneAcc = taskCounter.done;
                if (iteralObject.status === 'to do') {
                    acc++;
                    taskCounter.toDo = acc;
                }
                else {
                    doneAcc++;
                    taskCounter.done = doneAcc;
                }
            })
            console.log(taskCounter);

        }
        function changeStatus(task) {
            let array = this.listArray;
            let newStatus = "done";
            let defaultStatus = 'to do';
            array.find(function (el) {
                let iteralObject = el;
                if (iteralObject.task === task) {
                    if(iteralObject.status === defaultStatus){
                        iteralObject.status = newStatus;
                    }
                    else(iteralObject.status = defaultStatus)
                }
            })
        }
        function changeInfo(task, newInfo) {
            let array = this.listArray;
            array.find(function (el) {
                let iteralObject = el;
                if (iteralObject.task === task) {
                    iteralObject.info = newInfo
                }
            })
        }

        const toDoList = {
            listArray: [],
            create,
            remove,
            info,
            changeStatus,
            changeInfo
        }

        toDoList.create('Food', 'Need to buy some food');
        toDoList.create('food', 'Need to buy some food');
        toDoList.create('Meeting', 'Meeting with Fred in the park');
        toDoList.create('Remember', 'call boss at 5 pm ');
        toDoList.create('Diner', 'order pizza');
        toDoList.changeStatus('Diner');
        toDoList.changeStatus('Diner');
        toDoList.changeInfo('Meeting', 'meeting will be tomorrow')
        toDoList.remove("food")
        toDoList.info();
        

        console.log(toDoList.listArray);
    </script>
</body>

</html>